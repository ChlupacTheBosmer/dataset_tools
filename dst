#!/usr/bin/env bash
set -euo pipefail

SCRIPT_DIR="$(cd "$(dirname "${BASH_SOURCE[0]}")" && pwd)"
REPO_ROOT="$SCRIPT_DIR"

if [[ ! -f "$REPO_ROOT/src/dataset_tools/dst.py" ]]; then
  echo "Could not locate src/dataset_tools/dst.py relative to '$REPO_ROOT'" >&2
  exit 1
fi

source "$REPO_ROOT/scripts/activate_env.sh"
dst_activate_python_env
export PYTHONPATH="$REPO_ROOT/src${PYTHONPATH:+:$PYTHONPATH}"

cd "$REPO_ROOT"
exec python -m dataset_tools.dst "$@"
